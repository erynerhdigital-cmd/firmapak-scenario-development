<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>FirmaPak | Scenario Development Consultation | Virtual Instinct</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --vi-navy:#050b18;
      --vi-navy-soft:#0c1b2a;
      --vi-slate:#101820;
      --vi-ink:#111827;
      --vi-teal:#18b7b4;
      --vi-blue:#2e7dd7;
      --vi-green:#41b66c;
      --vi-text:#e5ecf5;
      --vi-muted:#94a3b8;
      --vi-border:#1f2933;
      --card-radius:18px;
      --shadow-soft:0 18px 40px rgba(0,0,0,.55);
    }

    * {
      box-sizing:border-box;
      margin:0;
      padding:0;
    }

    body {
      font-family:"Inter",system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      background:radial-gradient(circle at top,#192a3d 0,#050b18 45%,#020617 100%);
      color:var(--vi-text);
      min-height:100vh;
      display:flex;
      align-items:stretch;
      justify-content:center;
    }

    .page-shell {
      width:100%;
      min-height:100vh;
      padding:24px 16px 40px;
      display:flex;
      justify-content:center;
    }

    .layout {
      width:100%;
      max-width:1120px;
      display:flex;
      flex-direction:column;
      gap:20px;
    }

    /* TOP BAR: LOGOS ONLY */
    .top-bar {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
    }

    .logo-row {
      display:flex;
      align-items:center;
      gap:12px;
    }

    .firmapak-logo {
      height:32px;
      width:auto;
    }

    .vi-logo {
      height:26px;
      width:auto;
    }

    /* HERO SECTION */
    .hero {
      border-radius:24px;
      padding:28px 24px 26px;
      background:radial-gradient(circle at top left,rgba(59,130,246,.28),transparent 55%),
                  radial-gradient(circle at bottom right,rgba(56,189,248,.18),transparent 60%),
                  linear-gradient(145deg,#020617,#020617 35%,#020617);
      border:1px solid rgba(148,163,184,.35);
      box-shadow:var(--shadow-soft);
    }

    .hero-title {
      font-family:"Montserrat",system-ui;
      font-size:32px;
      line-height:1.2;
      margin-bottom:8px;
      letter-spacing:.02em;
    }

    .hero-title span.highlight {
      color:#4f8cff;
    }

    .hero-subtitle {
      font-size:14px;
      color:var(--vi-muted);
      max-width:640px;
      margin-bottom:24px;
    }

    .hero-tagline {
      text-transform:uppercase;
      letter-spacing:.18em;
      font-size:11px;
      color:rgba(148,163,184,.9);
      margin-bottom:12px;
    }

    .hero-grid {
      display:grid;
      grid-template-columns:repeat(3,minmax(0,1fr));
      gap:14px;
      margin-bottom:20px;
    }

    @media (max-width:900px){
      .hero-grid {
        grid-template-columns:1fr;
      }
    }

    .hero-card {
      border-radius:18px;
      padding:14px 14px 16px;
      background:rgba(15,23,42,.96);
      border:1px solid rgba(51,65,85,.9);
    }

    .hero-card-title {
      font-size:13px;
      font-weight:600;
      margin-bottom:4px;
    }

    .hero-card-sub {
      font-size:12px;
      color:var(--vi-muted);
    }

    .hero-icon {
      width:24px;
      height:24px;
      border-radius:999px;
      margin-bottom:8px;
      display:flex;
      align-items:center;
      justify-content:center;
      background:rgba(37,99,235,.2);
      font-size:14px;
    }

    .hero-bottom {
      margin-top:4px;
    }

    .expect-card {
      border-radius:18px;
      padding:14px 16px 12px;
      background:rgba(15,23,42,.96);
      border:1px solid rgba(51,65,85,.9);
      font-size:12px;
    }

    .expect-title {
      font-size:12px;
      font-weight:600;
      margin-bottom:8px;
    }

    .expect-columns {
      display:grid;
      grid-template-columns: repeat(2,minmax(0,1fr));
      gap:10px;
    }

    @media (max-width:600px){
      .expect-columns {
        grid-template-columns:1fr;
      }
    }

    .expect-section-title {
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.16em;
      color:rgba(148,163,184,.9);
      margin-bottom:6px;
    }

    .expect-list {
      list-style:none;
      padding-left:0;
    }

    .expect-list li {
      display:flex;
      align-items:flex-start;
      gap:6px;
      margin-bottom:4px;
    }

    .expect-list li span.bullet {
      font-size:12px;
      margin-top:1px;
    }

    .hero-cta-row {
      margin-top:16px;
      display:flex;
      align-items:center;
      justify-content:flex-start;
      gap:10px;
    }

    .btn {
      border-radius:999px;
      border:none;
      cursor:pointer;
      font-size:13px;
      font-weight:500;
      padding:9px 18px;
      display:inline-flex;
      align-items:center;
      gap:6px;
      white-space:nowrap;
      transition:background .15s ease,transform .08s ease,box-shadow .15s ease,opacity .15s ease;
      font-family:inherit;
    }

    .btn-primary {
      background:linear-gradient(135deg,var(--vi-teal),var(--vi-blue));
      color:#0b1220;
      box-shadow:0 10px 25px rgba(15,118,110,.6);
    }

    .btn-primary:hover {
      transform:translateY(-1px);
      box-shadow:0 14px 30px rgba(8,47,73,.8);
    }

    .btn-secondary {
      background:rgba(15,23,42,.95);
      color:var(--vi-text);
      border:1px solid rgba(148,163,184,.75);
    }

    .btn-secondary:hover {
      background:rgba(15,23,42,1);
    }

    .btn:disabled {
      opacity:.45;
      cursor:default;
      transform:none;
      box-shadow:none;
    }

    .hero-cta-hint {
      font-size:11px;
      color:var(--vi-muted);
    }

    /* SCENARIO DESIGN CARD + WIZARD */
    .intake-shell {
      margin-top:8px;
      display:flex;
      flex-direction:column;
      gap:14px;
    }

    .scenario-intake-card {
      border-radius:24px;
      padding:18px 18px 16px;
      background:radial-gradient(circle at top left,rgba(56,189,248,.18),transparent 55%),
                  radial-gradient(circle at bottom right,rgba(16,185,129,.2),transparent 60%),
                  linear-gradient(145deg,rgba(15,23,42,.96),rgba(15,23,42,.98));
      border:1px solid rgba(148,163,184,.32);
      box-shadow:var(--shadow-soft);
      font-size:12px;
      display:grid;
      grid-template-columns:minmax(0,1.2fr) minmax(0,1.2fr);
      gap:16px;
    }

    @media (max-width:900px){
      .scenario-intake-card {
        grid-template-columns:1fr;
      }
    }

    .scenario-intake-card h2 {
      font-family:"Montserrat",system-ui;
      font-size:18px;
      letter-spacing:.03em;
      text-transform:uppercase;
      margin-bottom:8px;
    }

    .scenario-tagline {
      font-size:12px;
      color:var(--vi-muted);
      margin-bottom:10px;
    }

    .scenario-chips {
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-bottom:10px;
    }

    .chip {
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.12em;
      padding:6px 9px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.5);
      background:rgba(15,23,42,.9);
      color:#e5ecf5;
    }

    .scenario-note {
      font-size:12px;
      color:var(--vi-muted);
    }

    .scenario-meta {
      font-size:11px;
      color:var(--vi-muted);
      border-radius:16px;
      padding:10px 12px;
      background:rgba(15,23,42,.9);
      border:1px solid rgba(148,163,184,.35);
    }

    .scenario-meta-row {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
      margin-bottom:4px;
    }

    .meta-label {
      text-transform:uppercase;
      letter-spacing:.14em;
      font-size:10px;
      color:rgba(148,163,184,.9);
    }

    .meta-value {
      font-size:11px;
      color:#e5ecf5;
    }

    .meta-list {
      margin-top:6px;
      padding-left:16px;
    }

    .meta-list li {
      margin-bottom:3px;
    }

    .wizard-shell {
      position:relative;
      min-height:360px;
    }

    .card {
      position:relative;
      border-radius:var(--card-radius);
      background:radial-gradient(circle at top left,rgba(56,189,248,.16),transparent 54%),
                  radial-gradient(circle at bottom right,rgba(45,212,191,.14),transparent 58%),
                  linear-gradient(160deg,#020617,#020617 5%,#020617 40%,#020617 100%);
      border:1px solid rgba(51,65,85,.95);
      box-shadow:var(--shadow-soft);
      padding:18px 18px 16px;
      overflow:hidden;
    }

    .card::before {
      content:"";
      position:absolute;
      inset:0;
      background:radial-gradient(circle at top,rgba(59,130,246,.22),transparent 60%);
      opacity:.5;
      pointer-events:none;
      mix-blend-mode:soft-light;
    }

    .card-inner {
      position:relative;
      z-index:1;
    }

    .step-label {
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.16em;
      color:var(--vi-muted);
      margin-bottom:6px;
    }

    .step-title {
      font-family:"Montserrat",system-ui;
      font-size:18px;
      margin-bottom:4px;
    }

    .step-subtitle {
      font-size:13px;
      color:var(--vi-muted);
      margin-bottom:12px;
    }

    .fields-grid {
      display:flex;
      flex-direction:column;
      gap:12px;
      margin-bottom:14px;
    }

    .field-group label {
      display:block;
      font-size:12px;
      margin-bottom:4px;
      color:#e5ecf5;
      font-weight:500;
      white-space:pre-line;
    }

    .field-group small {
      display:block;
      font-size:11px;
      color:var(--vi-muted);
      margin-bottom:4px;
      white-space:pre-line;
    }

    .field-input,
    .field-textarea {
      width:100%;
      border-radius:11px;
      border:1px solid rgba(71,85,105,.95);
      padding:9px 10px;
      background:rgba(15,23,42,.96);
      color:#e5ecf5;
      font-size:13px;
      outline:none;
      transition:border-color .15s ease,box-shadow .15s ease,background .15s ease;
      resize:vertical;
      min-height:40px;
    }

    .field-textarea {
      min-height:90px;
      max-height:260px;
    }

    .field-input:focus,
    .field-textarea:focus {
      border-color:var(--vi-teal);
      box-shadow:0 0 0 1px rgba(34,211,238,.5);
      background:#020617;
    }

    .field-input::placeholder,
    .field-textarea::placeholder {
      color:rgba(148,163,184,.7);
    }

    .progress-row {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-top:4px;
    }

    .progress-meta {
      display:flex;
      flex-direction:column;
      gap:4px;
      min-width:0;
      flex:1;
    }

    .progress-bar-shell {
      position:relative;
      width:100%;
      height:6px;
      border-radius:999px;
      background:rgba(15,23,42,.95);
      overflow:hidden;
      border:1px solid rgba(30,64,175,.8);
    }

    .progress-bar-fill {
      position:absolute;
      inset:0;
      width:0;
      border-radius:999px;
      background:linear-gradient(90deg,var(--vi-teal),var(--vi-blue));
      transition:width .2s ease-out;
    }

    .progress-text {
      font-size:11px;
      color:var(--vi-muted);
    }

    .nav-buttons {
      display:flex;
      align-items:center;
      gap:8px;
    }

    .status-message {
      margin-top:10px;
      font-size:12px;
    }

    .status-success {
      color:#4ade80;
    }

    .status-error {
      color:#f97373;
    }

    .status-neutral {
      color:var(--vi-muted);
    }

    .required-badge {
      color:#f97373;
      margin-left:2px;
    }

    .hidden {
      display:none;
    }
  </style>
</head>
<body>
  <div class="page-shell">
    <div class="layout">
      <!-- TOP LOGO BAR -->
      <div class="top-bar">
        <div class="logo-row">
          <img class="firmapak-logo" src="https://23746819.fs1.hubspotusercontent-na1.net/hubfs/23746819/Firmapak%20-%20White%20Logo.webp" alt="FirmaPak Logo">
        </div>
        <img class="vi-logo" src="https://23746819.fs1.hubspotusercontent-na1.net/hubfs/23746819/Virtual%20Instinct-03.webp" alt="Virtual Instinct Logo">
      </div>

      <!-- HERO -->
      <section class="hero">
        <div class="hero-tagline">Consultation to Develop</div>
        <h1 class="hero-title">
          Virtual Practice <span class="highlight">Scenarios</span>
        </h1>
        <p class="hero-subtitle">
          Complete this consultation form to help us build customized sales training scenarios tailored to FirmaPak‚Äôs unique challenges and opportunities.
        </p>

        <div class="hero-grid">
          <div class="hero-card">
            <div class="hero-icon">üìã</div>
            <div class="hero-card-title">Qualifying &amp; Needs Analysis</div>
            <div class="hero-card-sub">
              Master early-stage conversations and uncover customer needs effectively.
            </div>
          </div>
          <div class="hero-card">
            <div class="hero-icon">üìë</div>
            <div class="hero-card-title">Proposal Review to Close</div>
            <div class="hero-card-sub">
              Navigate negotiations and close deals with confidence.
            </div>
          </div>
          <div class="hero-card">
            <div class="hero-icon">‚ö°</div>
            <div class="hero-card-title">The Medley (Full-Flow)</div>
            <div class="hero-card-sub">
              Practice complete sales cycles from start to finish.
            </div>
          </div>
        </div>

        <div class="hero-bottom">
          <div class="expect-card">
            <div class="expect-title">What to Expect</div>
            <div class="expect-columns">
              <div>
                <div class="expect-section-title">This form covers</div>
                <ul class="expect-list">
                  <li><span class="bullet">‚úÖ</span><span>Customer profile &amp; ideal customer analysis</span></li>
                  <li><span class="bullet">‚úÖ</span><span>Customer personas &amp; buying dynamics</span></li>
                  <li><span class="bullet">‚úÖ</span><span>Qualifying &amp; needs analysis scenario inputs</span></li>
                  <li><span class="bullet">‚úÖ</span><span>Proposal review &amp; closing scenario inputs</span></li>
                </ul>
              </div>
              <div>
                <div class="expect-section-title">Time &amp; progress</div>
                <ul class="expect-list">
                  <li><span class="bullet">‚è±</span><span>Estimated time: 20‚Äì30 minutes</span></li>
                  <li><span class="bullet">üìÇ</span><span>7 numbered sections</span></li>
                  <li><span class="bullet">üìà</span><span>Progress indicator on each step</span></li>
                  <li><span class="bullet">‚úâÔ∏è</span><span>Responses emailed to the Virtual Instinct team</span></li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="hero-cta-row">
          <button id="start-btn" class="btn btn-primary">Start Consultation</button>
          <span class="hero-cta-hint">Questions will appear below once you start.</span>
        </div>
      </section>

      <!-- INTAKE + WIZARD -->
      <div class="intake-shell">
        <section class="scenario-intake-card">
          <div>
            <h2>Scenario Design Intake</h2>
            <p class="scenario-tagline">
              Use this intake to capture how your customers think, how deals are won or lost, and the exact moments your sales team needs to rehearse.
            </p>
            <div class="scenario-chips">
              <span class="chip">Qualifying &amp; Needs Analysis</span>
              <span class="chip">Proposal Review to Close</span>
              <span class="chip">Full-Flow Medley</span>
            </div>
            <p class="scenario-note">
              Your responses will be translated into live practice scenarios and Key Moments inside Virtual Instinct. We‚Äôll combine your lost deals, competitive dynamics, and internal sales patterns to build realistic simulations.
            </p>
          </div>
          <div class="scenario-meta">
            <div class="scenario-meta-row">
              <span class="meta-label">Delivered To</span>
              <span class="meta-value">Virtual Instinct Scenario Design Team</span>
            </div>
            <div class="scenario-meta-row">
              <span class="meta-label">What Happens Next</span>
              <span class="meta-value">We write scripts, build role-play flows &amp; schedule sessions.</span>
            </div>
            <ul class="meta-list">
              <li>‚úî Pre-consultation: collect FirmaPak logo, names &amp; emails of all participating salespeople.</li>
              <li>‚úî On submit, answers are sent to a secure webhook.</li>
              <li>‚úî Zapier handles email delivery &amp; HubSpot contact creation.</li>
            </ul>
          </div>
        </section>

        <main id="consultation-section" class="wizard-shell hidden">
          <section class="card" aria-live="polite">
            <div class="card-inner">
              <div id="step-header"></div>
              <form id="wizard-form">
                <div id="fields-container" class="fields-grid"></div>
              </form>

              <div class="progress-row">
                <div class="progress-meta">
                  <div class="progress-bar-shell" aria-hidden="true">
                    <div id="progress-bar" class="progress-bar-fill"></div>
                  </div>
                  <div id="progress-text" class="progress-text"></div>
                </div>
                <div class="nav-buttons">
                  <button type="button" id="back-btn" class="btn btn-secondary">‚Üê Back</button>
                  <button type="button" id="next-btn" class="btn btn-primary">Next ‚Üí</button>
                </div>
              </div>

              <div id="status" class="status-message status-neutral"></div>
            </div>
          </section>
        </main>
      </div>
    </div>
  </div>

  <!-- Hidden iframe so Zapier receives POST without leaving this page -->
  <iframe
    name="zapier-target"
    id="zapier-target"
    class="hidden"
    title="Zapier submission target"
  ></iframe>

  <script>
    /********************************************************
     * CONFIG: YOUR ZAPIER WEBHOOK
     ********************************************************/
    const WEBHOOK_URL = "https://hooks.zapier.com/hooks/catch/25619352/ufuigki/";

    /********************************************************
     * STEP DEFINITIONS (Option A ‚Äì all questions preserved)
     ********************************************************/
    const steps = [
      {
        id: "pre_consult",
        section: "Pre-Consultation",
        title: "Who will be practicing?",
        subtitle: "Collect names and emails of all participating salespeople so scenarios align with your team.",
        fields: [
          {
            name: "participants",
            label: "Names & emails of all participating salespeople",
            type: "textarea",
            required: false,
            helper: "You can paste a list or export from your CRM.\n\nExample:\nJane Smith ‚Äì jane@firmapak.com\nAlex Johnson ‚Äì alex@firmapak.com",
            placeholder: "List names, roles, and emails for everyone who will be in practice sessions."
          }
        ]
      },

      /* 1. CUSTOMER PROFILE */
      {
        id: "cust_icp",
        section: "1. Customer Profile",
        title: "Ideal Customer Profile",
        subtitle: "Understand FirmaPak‚Äôs ideal customer to anchor scenario realism.",
        fields: [
          {
            name: "ideal_customer_profile",
            label:
`Ideal Customer Profile

Who is FirmaPak‚Äôs Ideal Customer Profile (ICP)?
What industries, company sizes, or product types best fit?`,
            type: "textarea",
            required: false,
            placeholder: "Describe your ICP: industries, size, product types, geography, buying triggers‚Ä¶"
          }
        ]
      },
      {
        id: "cust_lost_deals",
        section: "1. Customer Profile",
        title: "Lost deals & proposal review",
        subtitle: "We‚Äôll turn real lost deals into realistic practice scenarios.",
        fields: [
          {
            name: "lost_deals_block",
            label:
`Lost Deals & Proposal Review

For four (4) different vertical market companies, tell us where you recently:
‚Ä¢ Lost a deal
‚Ä¢ Pitched and they went silent (ghosted)
‚Ä¢ Lost to a competitor

For each of the four deals, please include:
‚Ä¢ Company & vertical
‚Ä¢ Can we get copies of the proposals used in these four deals?
‚Ä¢ Who was the main contact (title/function)?
‚Ä¢ Why do you believe the deals were lost?
‚Ä¢ What patterns or themes do you see in lost opportunities?`,
            type: "textarea",
            required: false,
            placeholder: "Use one numbered section per deal, including vertical, contact title, outcome, why it was lost, and if a proposal is available."
          },
          {
            name: "cust_notes",
            label: "Notes ‚Äì Customer Profile",
            type: "textarea",
            required: false,
            placeholder: "Anything else about your customer profile or lost deals we should know before designing scenarios."
          },
          {
            name: "cust_additional_questions",
            label: "Additional questions ‚Äì Customer Profile",
            type: "textarea",
            required: false,
            placeholder: "Any questions you‚Äôd like us to ask or clarify live during the consultation."
          }
        ]
      },
      {
        id: "cust_competitive_usecases",
        section: "1. Customer Profile",
        title: "Competitive landscape & use cases",
        subtitle: "Who you‚Äôre compared to and where you stand out.",
        fields: [
          {
            name: "competitive_landscape",
            label:
`Competitive Landscape

Who are your biggest competitors?
What do buyers believe these competitors do better?
Where do those bigger competitors fail or fall short?`,
            type: "textarea",
            required: false,
            placeholder: "List key competitors and what buyers say each does well or poorly."
          },
          {
            name: "use_cases_dynamics",
            label:
`Use Cases & Vertical Dynamics

What are the primary use cases for blow-mold injection plastics?
What makes FirmaPak unique in certain verticals or markets?
What differentiators resonate most with customers?`,
            type: "textarea",
            required: false,
            placeholder: "Describe common applications, vertical nuances, and which differentiators actually land with customers."
          }
        ]
      },

      /* 2. CUSTOMER PERSONAS & BUYING DYNAMICS */
      {
        id: "personas_profiles",
        section: "2. Customer Personas & Buying Dynamics",
        title: "Typical buyer profiles",
        subtitle: "Build realistic customer personas for actors to portray.",
        fields: [
          {
            name: "typical_buyer_profiles",
            label:
`Typical Buyer Profiles

Who are the most common buyers at the qualification and proposal stages?
What is their education and experience level?
What is their role or job function?

Examples:
‚Ä¢ Brand Managers
‚Ä¢ Procurement
‚Ä¢ Plant Managers
‚Ä¢ Supply Chain Managers
‚Ä¢ Sustainability Leaders`,
            type: "textarea",
            required: false,
            placeholder: "For each persona, list title, experience level, and what they care most about in this decision."
          }
        ]
      },
      {
        id: "personas_dynamics",
        section: "2. Customer Personas & Buying Dynamics",
        title: "Decision dynamics & internal pressures",
        subtitle: "How different roles evaluate the same decision.",
        fields: [
          {
            name: "role_decision_dynamics",
            label:
`Role-Based Decision Dynamics

How does each persona view the purchase differently?
How do they gather information and evaluate suppliers?
What internal pressures do they experience?
‚Ä¢ Revenue?
‚Ä¢ Risk mitigation?
‚Ä¢ On-time delivery?
‚Ä¢ Sustainability requirements?`,
            type: "textarea",
            required: false,
            placeholder: "Describe how each role approaches risk, information gathering, and internal expectations."
          },
          {
            name: "risk_perception_block",
            label:
`Risk Perception

What worries them most about choosing a smaller supplier?
What assurances or proof points do they require?`,
            type: "textarea",
            required: false,
            placeholder: "List common fears and the proof (data, references, certifications) that calms those fears."
          },
          {
            name: "personas_notes",
            label: "Notes ‚Äì Customer Personas & Buying Dynamics",
            type: "textarea",
            required: false,
            placeholder: "Anything else about stakeholders, influencers, champions, or internal politics."
          },
          {
            name: "personas_additional_questions",
            label: "Additional questions ‚Äì Customer Personas",
            type: "textarea",
            required: false,
            placeholder: "Questions you‚Äôd like us to explore with you live."
          }
        ]
      },

      /* 3. QUALIFYING & NEEDS ANALYSIS */
      {
        id: "qual_pipeline",
        section: "3. Qualifying & Needs Analysis ‚Äì Scenario Development",
        title: "Pipeline mechanics",
        subtitle: "Identify what ‚Äòqualified‚Äô actually means.",
        fields: [
          {
            name: "pipeline_mechanics",
            label:
`Pipeline Mechanics

What makes a lead qualified in your pipeline?
What specific information must a rep uncover before drafting a proposal?
What is the minimum viable information needed to price or scope a project?`,
            type: "textarea",
            required: false,
            placeholder: "Describe your qualification checklist and minimum data needed to move forward."
          }
        ]
      },
      {
        id: "qual_bottlenecks",
        section: "3. Qualifying & Needs Analysis ‚Äì Scenario Development",
        title: "Pipeline bottlenecks & mistakes",
        subtitle: "Where conversations stall and why.",
        fields: [
          {
            name: "pipeline_bottlenecks",
            label:
`Pipeline Bottlenecks

Where do reps get stuck most frequently in early stages?
What causes leads to stall before moving to proposal review?
What are the top three mistakes reps make during qualification?`,
            type: "textarea",
            required: false,
            placeholder: "Share concrete examples of stalled deals, repeated patterns, and common rep missteps."
          }
        ]
      },
      {
        id: "qual_pain_competitive",
        section: "3. Qualifying & Needs Analysis ‚Äì Scenario Development",
        title: "Pain points, motivations & competitive outlook",
        subtitle: "Why customers switch and who else they consider.",
        fields: [
          {
            name: "pain_points_motivations",
            label:
`Pain Points & Motivations

Why do customers switch suppliers?
What common objections or brush-offs do reps face early?
How often do buyers mention:
‚Ä¢ Supply chain volatility?
‚Ä¢ Resin variability?
‚Ä¢ Capacity, timeline, or changeovers?`,
            type: "textarea",
            required: false,
            placeholder: "Describe real phrases buyers use when talking about pain, risk, or operational challenges."
          },
          {
            name: "competitive_outlook",
            label:
`Competitive Outlook

Which competitors are mentioned by name in early calls?
What do buyers like about them?
Where do those competitors fall short?`,
            type: "textarea",
            required: false,
            placeholder: "Provide competitor names and buyer commentary we can mirror in scripts."
          },
          {
            name: "decision_criteria_block",
            label:
`Decision Criteria

What is the #1 reason customers choose FirmaPak over competitors?
What is the #1 reason they walk away?`,
            type: "textarea",
            required: false,
            placeholder: "Summarize the deciding factors on both wins and losses."
          },
          {
            name: "qual_notes",
            label: "Notes ‚Äì Qualifying & Needs Analysis",
            type: "textarea",
            required: false,
            placeholder: "Any specific calls or opportunities we should base scenarios on."
          },
          {
            name: "qual_additional_questions",
            label: "Additional questions ‚Äì Qualifying & Needs Analysis",
            type: "textarea",
            required: false,
            placeholder: "Additional prompts you‚Äôd like us to cover."
          }
        ]
      },

      /* 4. PROPOSAL REVIEW TO CLOSE */
      {
        id: "proposal_process",
        section: "4. Proposal Review to Close ‚Äì Scenario Development",
        title: "Proposal process",
        subtitle: "Clarify what happens from proposal send to decision.",
        fields: [
          {
            name: "proposal_process_block",
            label:
`Proposal Process

Can we get copies of four proposals in different verticals that did not close?
How are proposals typically delivered? (Email? Video call? In person?)
What is the format or style?
‚Ä¢ Single option?
‚Ä¢ Multiple options?
‚Ä¢ Volume incentives?`,
            type: "textarea",
            required: false,
            placeholder: "Describe where proposals are stored, how they‚Äôre delivered, and how options are structured."
          }
        ]
      },
      {
        id: "proposal_negotiation",
        section: "4. Proposal Review to Close ‚Äì Scenario Development",
        title: "Negotiation dynamics & decision makers",
        subtitle: "What needs to be practiced during proposal walkthroughs and final asks.",
        fields: [
          {
            name: "negotiation_dynamics",
            label:
`Negotiation Dynamics

What elements of proposals do buyers negotiate most?
Where do buyers scrutinize details or pricing?
What objections arise most frequently at this stage?
Where do reps tend to lose buyer engagement during the walkthrough?
How do you pre or trial close or use techniques to tie down deals?
What is the next action after receiving a signed deal or PO?`,
            type: "textarea",
            required: false,
            placeholder: "Share typical negotiation flow, sticking points, and how reps attempt to close today."
          },
          {
            name: "proposal_decision_makers",
            label:
`Decision Makers

Who makes the final decision?
Is it the same contact from the beginning, or additional stakeholders?`,
            type: "textarea",
            required: false,
            placeholder: "Outline the decision-making chain and who appears late in the process."
          },
          {
            name: "proposal_notes",
            label: "Notes ‚Äì Proposal Review to Close",
            type: "textarea",
            required: false,
            placeholder: "Any specific late-stage deals we should mirror in scenarios."
          },
          {
            name: "proposal_additional_questions",
            label: "Additional questions ‚Äì Proposal Review to Close",
            type: "textarea",
            required: false,
            placeholder: "Questions you‚Äôd like us to explore during the live consultation."
          }
        ]
      },

      /* 5. KEY MOMENT VISIBILITY */
      {
        id: "visibility",
        section: "5. Determine Visibility of Key Moments",
        title: "Key Moment visibility preferences",
        subtitle: "Clarify who can see recorded highlights inside Virtual Instinct.",
        fields: [
          {
            name: "visibility_preferences",
            label:
`Discussion

What is FirmaPak‚Äôs preference regarding Key Moment visibility?
(Private to the salesperson, public within the team, or a combination depending on content?)`,
            type: "textarea",
            required: false,
            placeholder: "Describe your default preference and any exceptions."
          },
          {
            name: "confidential_topics",
            label:
`Confidential Topics

Are there topics or practice moments that should remain confidential?
Will leadership want access to all clips or selected clips?`,
            type: "textarea",
            required: false,
            placeholder: "Note any accounts, pricing, or internal strategies that require special handling."
          },
          {
            name: "visibility_notes",
            label: "Notes ‚Äì Key Moment Visibility",
            type: "textarea",
            required: false,
            placeholder: "Additional guidance or constraints for what can be recorded and shared."
          }
        ]
      },

      /* 6. VIRTUAL IMPROV PROGRAM */
      {
        id: "improv_schedule",
        section: "6. Pre-Schedule Virtual Improv Program",
        title: "Virtual improv scheduling",
        subtitle: "Reinforce scenario skills with weekly improv-based sessions.",
        fields: [
          {
            name: "improv_program_schedule",
            label:
`Discussion

What days/times work best for the team?`,
            type: "textarea",
            required: false,
            placeholder: "Include time zones, preferred days of week, and any recurring constraints."
          },
          {
            name: "improv_notes",
            label: "Notes ‚Äì Virtual Improv Program",
            type: "textarea",
            required: false,
            placeholder: "Busy seasons, plant shutdowns, travel-heavy periods, or blackout dates."
          }
        ]
      },

      /* 7. END OF ACTIVE PRACTICE PERIOD DEBRIEF */
      {
        id: "debrief",
        section: "7. Pre-Schedule End of Active Practice Period Debrief",
        title: "End-of-practice debrief",
        subtitle: "Review outcomes, Key Moments, challenges, wins, and next steps.",
        fields: [
          {
            name: "debrief_attendees",
            label:
`Discussion

Who should attend the debrief?`,
            type: "textarea",
            required: false,
            placeholder: "List the roles or specific people who should be in the debrief meeting."
          },
          {
            name: "debrief_outcomes",
            label:
`What outcomes matter most to measure success?`,
            type: "textarea",
            required: false,
            placeholder: "Examples: behavior change, pipeline movement, win rates, deal quality, ramp time‚Ä¶"
          },
          {
            name: "debrief_recap",
            label:
`Should a written or video recap be included?`,
            type: "textarea",
            required: false,
            placeholder: "Share your preferences for recap format and who it should be shared with."
          },
          {
            name: "debrief_notes",
            label: "Notes ‚Äì End of Active Practice Period Debrief",
            type: "textarea",
            required: false,
            placeholder: "Any additional comments, questions, or context you want us to know."
          }
        ]
      }
    ];

    /********************************************************
     * STATE & DOM REFS
     ********************************************************/
    let currentStepIndex = 0;
    const answers = {};

    const stepHeaderEl = document.getElementById("step-header");
    const fieldsContainerEl = document.getElementById("fields-container");
    const progressBarEl  = document.getElementById("progress-bar");
    const progressTextEl = document.getElementById("progress-text");
    const backBtn        = document.getElementById("back-btn");
    const nextBtn        = document.getElementById("next-btn");
    const statusEl       = document.getElementById("status");
    const consultationSection = document.getElementById("consultation-section");
    const startBtn       = document.getElementById("start-btn");

    /********************************************************
     * RENDERING
     ********************************************************/
    function renderStep() {
      const step = steps[currentStepIndex];
      const total = steps.length;
      const stepNumber = currentStepIndex + 1;

      stepHeaderEl.innerHTML = `
        <div class="step-label">${step.section}</div>
        <h3 class="step-title">${step.title}</h3>
        <p class="step-subtitle">${step.subtitle || ""}</p>
      `;

      fieldsContainerEl.innerHTML = "";
      step.fields.forEach(field => {
        const wrapper = document.createElement("div");
        wrapper.className = "field-group";

        const fieldId = `field_${field.name}`;
        let labelHtml = `<label for="${fieldId}">${field.label}`;
        if (field.required) labelHtml += ` <span class="required-badge">*</span>`;
        labelHtml += `</label>`;

        let helperHtml = field.helper ? `<small>${field.helper}</small>` : "";

        const existingValue = answers[field.name] || "";
        let controlHtml = "";

        if (field.type === "textarea") {
          controlHtml = `
            <textarea
              id="${fieldId}"
              class="field-textarea"
              name="${field.name}"
              placeholder="${field.placeholder || ""}"
            >${existingValue}</textarea>
          `;
        } else {
          controlHtml = `
            <input
              id="${fieldId}"
              class="field-input"
              type="${field.type}"
              name="${field.name}"
              placeholder="${field.placeholder || ""}"
              value="${existingValue}"
            />
          `;
        }

        wrapper.innerHTML = labelHtml + helperHtml + controlHtml;
        fieldsContainerEl.appendChild(wrapper);
      });

      const percent = (stepNumber / total) * 100;
      progressBarEl.style.width = percent.toFixed(1) + "%";
      progressTextEl.textContent = `Step ${stepNumber} of ${total}`;

      backBtn.disabled = currentStepIndex === 0;
      nextBtn.textContent = currentStepIndex === total - 1 ? "Submit ‚Üí" : "Next ‚Üí";

      statusEl.textContent = "";
      statusEl.className = "status-message status-neutral";
    }

    function collectCurrentStepValues() {
      const step = steps[currentStepIndex];
      let valid = true;
      let firstInvalidField = null;

      step.fields.forEach(field => {
        const fieldId = `field_${field.name}`;
        const el = document.getElementById(fieldId);
        if (!el) return;

        const value = el.value.trim();
        answers[field.name] = value;

        if (field.required && !value) {
          valid = false;
          if (!firstInvalidField) firstInvalidField = el;
        }

        if (field.required && field.type === "email" && value) {
          const emailOk = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value);
          if (!emailOk) {
            valid = false;
            if (!firstInvalidField) firstInvalidField = el;
          }
        }
      });

      if (!valid) {
        statusEl.textContent = "Please complete the required fields on this step.";
        statusEl.className = "status-message status-error";
        if (firstInvalidField) firstInvalidField.focus();
        return false;
      }

      return true;
    }

    /********************************************************
     * SUBMIT ‚Äì HIDDEN IFRAME TO ZAPIER
     ********************************************************/
    function handleSubmit() {
      if (!collectCurrentStepValues()) return;

      const payloadObj = {
        meta: {
          source: "FirmaPak Scenario Development Consultation",
          submittedAt: new Date().toISOString(),
          userAgent: navigator.userAgent
        },
        answers: { ...answers }
      };

      const payload = JSON.stringify(payloadObj);

      statusEl.textContent = "Submitting your responses...";
      statusEl.className = "status-message status-neutral";

      if (!WEBHOOK_URL) {
        statusEl.textContent = "No webhook URL configured. Please contact the Virtual Instinct team.";
        statusEl.className = "status-message status-error";
        return;
      }

      // Build a temporary form that posts to Zapier in a hidden iframe
      const form = document.createElement("form");
      form.method = "POST";
      form.action = WEBHOOK_URL;
      form.target = "zapier-target";

      const hidden = document.createElement("input");
      hidden.type = "hidden";
      hidden.name = "payload";
      hidden.value = payload;
      form.appendChild(hidden);

      document.body.appendChild(form);
      form.submit();

      // Show success UI on this page
      statusEl.textContent = "Success! Your consultation responses have been securely submitted to the Virtual Instinct team. You may close this tab.";
      statusEl.className = "status-message status-success";
      nextBtn.disabled = true;
      backBtn.disabled = true;
    }

    /********************************************************
     * EVENTS
     ********************************************************/
    backBtn.addEventListener("click", () => {
      if (currentStepIndex === 0) return;
      if (!collectCurrentStepValues()) return;
      currentStepIndex -= 1;
      renderStep();
    });

    nextBtn.addEventListener("click", () => {
      const isLastStep = currentStepIndex === steps.length - 1;
      if (isLastStep) {
        handleSubmit();
      } else {
        if (!collectCurrentStepValues()) return;
        currentStepIndex += 1;
        renderStep();
      }
    });

    startBtn.addEventListener("click", () => {
      consultationSection.classList.remove("hidden");
      startBtn.disabled = true;
      startBtn.textContent = "Consultation Started";
      renderStep();
    });
  </script>
</body>
</html>


