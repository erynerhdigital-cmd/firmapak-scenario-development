<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>FirmaPak | Scenario Development Consultation | Virtual Instinct</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --vi-navy:#050b18;
      --vi-navy-soft:#0c1b2a;
      --vi-slate:#101820;
      --vi-ink:#111827;
      --vi-teal:#18b7b4;
      --vi-blue:#2e7dd7;
      --vi-green:#41b66c;
      --vi-text:#e5ecf5;
      --vi-muted:#94a3b8;
      --vi-border:#1f2933;
      --card-radius:18px;
      --shadow-soft:0 18px 40px rgba(0,0,0,.55);
    }

    *{box-sizing:border-box;margin:0;padding:0;}

    body{
      font-family:"Inter",system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      background:radial-gradient(circle at top,#192a3d 0,#050b18 45%,#020617 100%);
      color:var(--vi-text);
      min-height:100vh;
      display:flex;
      align-items:stretch;
      justify-content:center;
    }

    .page-shell{
      width:100%;
      min-height:100vh;
      padding:24px 16px 40px;
      display:flex;
      justify-content:center;
    }

    .layout{
      width:100%;
      max-width:1120px;
      display:flex;
      flex-direction:column;
      gap:20px;
    }

    /* TOP BAR */
    .top-bar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
    }
    .logo-row{display:flex;align-items:center;gap:12px;}
    .firmapak-logo{height:32px;width:auto;}
    .vi-logo{height:26px;width:auto;}

    /* HERO */
    .hero{
      border-radius:24px;
      padding:28px 24px 26px;
      background:radial-gradient(circle at top left,rgba(59,130,246,.28),transparent 55%),
                 radial-gradient(circle at bottom right,rgba(56,189,248,.18),transparent 60%),
                 linear-gradient(145deg,#020617,#020617 35%,#020617);
      border:1px solid rgba(148,163,184,.35);
      box-shadow:var(--shadow-soft);
    }

    .hero-tagline{
      text-transform:uppercase;
      letter-spacing:.18em;
      font-size:11px;
      color:rgba(148,163,184,.9);
      margin-bottom:12px;
    }

    .hero-title{
      font-family:"Montserrat",system-ui;
      font-size:32px;
      line-height:1.2;
      margin-bottom:8px;
      letter-spacing:.02em;
    }

    .hero-title .highlight{color:#4f8cff;}

    .hero-subtitle{
      font-size:14px;
      color:var(--vi-muted);
      max-width:640px;
      margin-bottom:24px;
    }

    .hero-grid{
      display:grid;
      grid-template-columns:repeat(3,minmax(0,1fr));
      gap:14px;
      margin-bottom:18px;
    }
    @media (max-width:900px){
      .hero-grid{grid-template-columns:1fr;}
    }

    .hero-card{
      border-radius:18px;
      padding:14px 14px 16px;
      background:rgba(15,23,42,.96);
      border:1px solid rgba(51,65,85,.9);
    }
    .hero-icon{
      width:24px;height:24px;border-radius:999px;
      margin-bottom:8px;
      display:flex;align-items:center;justify-content:center;
      background:rgba(37,99,235,.2);font-size:14px;
    }
    .hero-card-title{font-size:13px;font-weight:600;margin-bottom:4px;}
    .hero-card-sub{font-size:12px;color:var(--vi-muted);}

    /* NEW: HERO BOTTOM WITH SCENARIO PANEL + EXPECT CARD SIDE BY SIDE */
    .hero-bottom{
      display:grid;
      grid-template-columns:minmax(0,1.6fr) minmax(0,1.7fr);
      gap:16px;
      margin-top:4px;
    }
    @media (max-width:900px){
      .hero-bottom{grid-template-columns:1fr;}
    }

    /* Scenario Design Intake panel now in hero */
    .intro-panel{
      border-radius:18px;
      padding:14px 16px 14px;
      background:radial-gradient(circle at top left,rgba(56,189,248,.18),transparent 55%),
                 radial-gradient(circle at bottom right,rgba(16,185,129,.2),transparent 60%),
                 linear-gradient(145deg,rgba(15,23,42,.96),rgba(15,23,42,.98));
      border:1px solid rgba(148,163,184,.32);
      box-shadow:var(--shadow-soft);
      font-size:12px;
    }
    .intro-panel h2{
      font-family:"Montserrat",system-ui;
      font-size:16px;
      letter-spacing:.08em;
      text-transform:uppercase;
      margin-bottom:8px;
    }
    .intro-subtitle{font-size:12px;color:var(--vi-muted);margin-bottom:10px;}
    .scenario-chips{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:10px;}
    .chip{
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:.14em;
      padding:5px 8px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.5);
      background:rgba(15,23,42,.9);
    }
    .intro-note{font-size:12px;line-height:1.5;color:var(--vi-muted);margin-bottom:10px;}
    .meta-box{
      margin-top:4px;
      padding:8px 10px;
      border-radius:14px;
      background:rgba(15,23,42,.9);
      border:1px solid rgba(148,163,184,.35);
      font-size:11px;
      color:var(--vi-muted);
    }
    .meta-row{
      display:flex;align-items:center;justify-content:space-between;
      gap:8px;margin-bottom:4px;
    }
    .meta-label{
      text-transform:uppercase;
      letter-spacing:.14em;
      font-size:10px;
      color:rgba(148,163,184,.9);
    }
    .meta-value{font-size:11px;color:#e5ecf5;}
    .meta-checklist{margin-top:4px;padding-left:16px;}
    .meta-checklist li{margin-bottom:3px;}

    /* Expect card */
    .expect-card{
      border-radius:18px;
      padding:14px 16px 12px;
      background:rgba(15,23,42,.96);
      border:1px solid rgba(51,65,85,.9);
      font-size:12px;
    }
    .expect-title{font-size:12px;font-weight:600;margin-bottom:8px;}
    .expect-columns{
      display:grid;
      grid-template-columns:repeat(2,minmax(0,1fr));
      gap:10px;
    }
    @media (max-width:600px){
      .expect-columns{grid-template-columns:1fr;}
    }
    .expect-section-title{
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.16em;
      color:rgba(148,163,184,.9);
      margin-bottom:6px;
    }
    .expect-list{list-style:none;padding-left:0;}
    .expect-list li{
      display:flex;align-items:flex-start;gap:6px;margin-bottom:4px;
    }
    .expect-list li .bullet{font-size:12px;margin-top:1px;}

    .hero-cta-row{
      margin-top:16px;
      display:flex;
      align-items:center;
      justify-content:flex-start;
      gap:10px;
    }

    .btn{
      border-radius:999px;
      border:none;
      cursor:pointer;
      font-size:13px;
      font-weight:500;
      padding:9px 18px;
      display:inline-flex;
      align-items:center;
      gap:6px;
      white-space:nowrap;
      transition:background .15s ease,transform .08s ease,box-shadow .15s ease,opacity .15s ease;
      font-family:inherit;
    }
    .btn-primary{
      background:linear-gradient(135deg,var(--vi-teal),var(--vi-blue));
      color:#0b1220;
      box-shadow:0 10px 25px rgba(15,118,110,.6);
    }
    .btn-primary:hover{
      transform:translateY(-1px);
      box-shadow:0 14px 30px rgba(8,47,73,.8);
    }
    .hero-cta-hint{font-size:11px;color:var(--vi-muted);}

    /* CONSULTATION SECTION */
    .content-row{
      margin-top:12px;
      /* questions full-width under hero */
    }

    .wizard-shell{position:relative;min-height:360px;}

    .card{
      position:relative;
      border-radius:var(--card-radius);
      background:radial-gradient(circle at top left,rgba(56,189,248,.16),transparent 54%),
                 radial-gradient(circle at bottom right,rgba(45,212,191,.14),transparent 58%),
                 linear-gradient(160deg,#020617,#020617 5%,#020617 40%,#020617 100%);
      border:1px solid rgba(51,65,85,.95);
      box-shadow:var(--shadow-soft);
      padding:18px 18px 16px;
      overflow:hidden;
    }
    .card::before{
      content:"";
      position:absolute;
      inset:0;
      background:radial-gradient(circle at top,rgba(59,130,246,.22),transparent 60%);
      opacity:.5;
      pointer-events:none;
      mix-blend-mode:soft-light;
    }
    .card-inner{position:relative;z-index:1;}

    .step-label{
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.16em;
      color:var(--vi-muted);
      margin-bottom:6px;
    }
    .step-title{
      font-family:"Montserrat",system-ui;
      font-size:18px;
      margin-bottom:4px;
    }
    .step-subtitle{font-size:13px;color:var(--vi-muted);margin-bottom:12px;}

    .fields-grid{display:flex;flex-direction:column;gap:12px;margin-bottom:14px;}

    .field-group label{
      display:block;
      font-size:12px;
      margin-bottom:4px;
      color:#e5ecf5;
      font-weight:500;
    }
    .field-group small{
      display:block;
      font-size:11px;
      color:var(--vi-muted);
      margin-bottom:4px;
    }

    .field-input,.field-textarea{
      width:100%;
      border-radius:11px;
      border:1px solid rgba(71,85,105,.95);
      padding:9px 10px;
      background:rgba(15,23,42,.96);
      color:#e5ecf5;
      font-size:13px;
      outline:none;
      transition:border-color .15s ease,box-shadow .15s ease,background .15s ease;
      resize:vertical;
      min-height:40px;
    }
    .field-textarea{min-height:90px;max-height:220px;}
    .field-input:focus,.field-textarea:focus{
      border-color:var(--vi-teal);
      box-shadow:0 0 0 1px rgba(34,211,238,.5);
      background:#020617;
    }
    .field-input::placeholder,.field-textarea::placeholder{
      color:rgba(148,163,184,.7);
    }

    .progress-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-top:4px;
    }
    .progress-meta{display:flex;flex-direction:column;gap:4px;min-width:0;flex:1;}
    .progress-bar-shell{
      position:relative;
      width:100%;
      height:6px;
      border-radius:999px;
      background:rgba(15,23,42,.95);
      overflow:hidden;
      border:1px solid rgba(30,64,175,.8);
    }
    .progress-bar-fill{
      position:absolute;
      inset:0;
      width:0;
      border-radius:999px;
      background:linear-gradient(90deg,var(--vi-teal),var(--vi-blue));
      transition:width .2s ease-out;
    }
    .progress-text{font-size:11px;color:var(--vi-muted);}

    .nav-buttons{display:flex;align-items:center;gap:8px;}
    .btn-secondary{
      background:rgba(15,23,42,.95);
      color:var(--vi-text);
      border:1px solid rgba(148,163,184,.75);
    }
    .btn-secondary:hover{background:rgba(15,23,42,1);}
    .btn:disabled{
      opacity:.45;
      cursor:default;
      transform:none;
      box-shadow:none;
    }

    .status-message{margin-top:10px;font-size:12px;}
    .status-success{color:#4ade80;}
    .status-error{color:#f97373;}
    .status-neutral{color:var(--vi-muted);}

    .required-badge{color:#f97373;margin-left:2px;}
    .hidden{display:none;}
  </style>
</head>
<body>
  <div class="page-shell">
    <div class="layout">
      <!-- TOP LOGO BAR -->
      <div class="top-bar">
        <div class="logo-row">
          <img class="firmapak-logo" src="https://23746819.fs1.hubspotusercontent-na1.net/hubfs/23746819/Firmapak%20-%20White%20Logo.webp" alt="FirmaPak Logo">
        </div>
        <img class="vi-logo" src="https://23746819.fs1.hubspotusercontent-na1.net/hubfs/23746819/Virtual%20Instinct-03.webp" alt="Virtual Instinct Logo">
      </div>

      <!-- HERO -->
      <section class="hero">
        <div class="hero-tagline">Consultation to Develop</div>
        <h1 class="hero-title">
          Virtual Practice <span class="highlight">Scenarios</span>
        </h1>
        <p class="hero-subtitle">
          Complete this consultation form to help us build customized sales training scenarios
          tailored to FirmaPak‚Äôs unique challenges and opportunities.
        </p>

        <div class="hero-grid">
          <div class="hero-card">
            <div class="hero-icon">üìã</div>
            <div class="hero-card-title">Qualifying &amp; Needs Analysis</div>
            <div class="hero-card-sub">
              Master early-stage conversations and uncover customer needs effectively.
            </div>
          </div>
          <div class="hero-card">
            <div class="hero-icon">üìë</div>
            <div class="hero-card-title">Proposal Review to Close</div>
            <div class="hero-card-sub">
              Navigate negotiations and close deals with confidence.
            </div>
          </div>
          <div class="hero-card">
            <div class="hero-icon">‚ö°</div>
            <div class="hero-card-title">The Medley (Full-Flow)</div>
            <div class="hero-card-sub">
              Practice complete sales cycles from start to finish.
            </div>
          </div>
        </div>

        <!-- Scenario panel + What to Expect -->
        <div class="hero-bottom">
          <!-- Scenario Design Intake (moved up) -->
          <aside class="intro-panel">
            <h2>Scenario Design Intake</h2>
            <p class="intro-subtitle">
              Use this intake to capture how your customers think, how deals are won or lost,
              and the exact moments your sales team needs to rehearse.
            </p>

            <div class="scenario-chips">
              <span class="chip">Qualifying &amp; Needs Analysis</span>
              <span class="chip">Proposal Review to Close</span>
              <span class="chip">Full-Flow Medley</span>
            </div>

            <p class="intro-note">
              Your responses will be translated into live practice scenarios and Key Moments inside
              Virtual Instinct. We‚Äôll combine your lost deals, competitive dynamics, and internal
              sales patterns to build realistic simulations.
            </p>

            <div class="meta-box">
              <div class="meta-row">
                <span class="meta-label">Delivered To</span>
                <span class="meta-value">Virtual Instinct Scenario Design Team</span>
              </div>
              <div class="meta-row">
                <span class="meta-label">What Happens Next</span>
                <span class="meta-value">We write scripts, build role-play flows &amp; schedule sessions.</span>
              </div>
              <ul class="meta-checklist">
                <li>‚úî On submit, answers are sent to a secure webhook.</li>
                <li>‚úî Zapier handles email delivery &amp; HubSpot contact creation.</li>
              </ul>
            </div>
          </aside>

          <!-- What to Expect -->
          <div class="expect-card">
            <div class="expect-title">What to Expect</div>
            <div class="expect-columns">
              <div>
                <div class="expect-section-title">This form covers</div>
                <ul class="expect-list">
                  <li><span class="bullet">‚úÖ</span><span>Customer profile &amp; ideal customer analysis</span></li>
                  <li><span class="bullet">‚úÖ</span><span>Customer personas &amp; buying dynamics</span></li>
                  <li><span class="bullet">‚úÖ</span><span>Qualifying &amp; needs analysis scenarios</span></li>
                  <li><span class="bullet">‚úÖ</span><span>Proposal review &amp; closing scenarios</span></li>
                </ul>
              </div>
              <div>
                <div class="expect-section-title">Time &amp; progress</div>
                <ul class="expect-list">
                  <li><span class="bullet">‚è±</span><span>Estimated time: 20‚Äì30 minutes</span></li>
                  <li><span class="bullet">üìÇ</span><span>7 sections to complete</span></li>
                  <li><span class="bullet">üìà</span><span>Progress indicator on each step</span></li>
                  <li><span class="bullet">‚úâÔ∏è</span><span>Responses emailed to the Virtual Instinct team</span></li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="hero-cta-row">
          <button id="start-btn" class="btn btn-primary">Start Consultation</button>
          <span class="hero-cta-hint">Questions will appear below once you start.</span>
        </div>
      </section>

      <!-- CONSULTATION SECTION (questions under hero) -->
      <div id="consultation-section" class="content-row hidden">
        <main class="wizard-shell">
          <section class="card" aria-live="polite">
            <div class="card-inner">
              <div id="step-header"></div>
              <form id="wizard-form">
                <div id="fields-container" class="fields-grid"></div>
              </form>

              <div class="progress-row">
                <div class="progress-meta">
                  <div class="progress-bar-shell" aria-hidden="true">
                    <div id="progress-bar" class="progress-bar-fill"></div>
                  </div>
                  <div id="progress-text" class="progress-text"></div>
                </div>
                <div class="nav-buttons">
                  <button type="button" id="back-btn" class="btn btn-secondary">‚Üê Back</button>
                  <button type="button" id="next-btn" class="btn btn-primary">Next ‚Üí</button>
                </div>
              </div>

              <div id="status" class="status-message status-neutral"></div>
            </div>
          </section>
        </main>
      </div>
    </div>
  </div>

  <!-- Hidden iframe target for form submission (avoids CORS issues) -->
  <iframe name="zapier_iframe" style="display:none;"></iframe>

  <script>
    /********************************************************
     * CONFIG
     ********************************************************/
    const WEBHOOK_URL = "https://hooks.zapier.com/hooks/catch/25619352/ufuigki/";

    /********************************************************
     * STEP DEFINITIONS (same as before)
     ********************************************************/
    const steps = [
      {
        id: "intro_contact",
        section: "Pre-Consultation",
        title: "Who will be practicing?",
        subtitle: "List the salespeople who will participate so we can align scenarios with your team.",
        fields: [
          {
            name: "participants",
            label: "Names & emails of all participating salespeople",
            type: "textarea",
            required: false,
            helper: "You can paste a list or export from your CRM.",
            placeholder: "Example:\nJane Smith ‚Äì jane@firmapak.com\nAlex Johnson ‚Äì alex@firmapak.com"
          }
        ]
      },
      /* ... all the other step objects EXACTLY as you already have them ... */
      /* I am keeping them unchanged for brevity here ‚Äì copy the same step
         objects from your current file between this comment and the last step. */
      {
        id: "debrief",
        section: "7. End-of-Period Debrief",
        title: "End-of-practice debrief",
        subtitle: "Align on success metrics, attendees, and recap format.",
        fields: [
          { name: "debrief_attendees", label: "Who should attend the debrief?", type: "textarea", required: false, placeholder: "Sales leaders, enablement, reps, operations, etc." },
          { name: "success_outcomes", label: "What outcomes matter most to measure success?", type: "textarea", required: false, placeholder: "Behavior change, pipeline movement, win rates, deal quality..." },
          { name: "recap_format", label: "Should we deliver a written recap, video recap, or both?", type: "textarea", required: false, placeholder: "Preferred format and who it should be shared with." },
          { name: "final_notes", label: "Final notes or anything we didn‚Äôt ask that you want us to know.", type: "textarea", required: false, placeholder: "Use this space to capture anything else on your mind." }
        ]
      }
    ];

    /********************************************************
     * STATE & DOM
     ********************************************************/
    let currentStepIndex = 0;
    const answers = {};

    const stepHeaderEl = document.getElementById("step-header");
    const fieldsContainerEl = document.getElementById("fields-container");
    const progressBarEl = document.getElementById("progress-bar");
    const progressTextEl = document.getElementById("progress-text");
    const backBtn = document.getElementById("back-btn");
    const nextBtn = document.getElementById("next-btn");
    const statusEl = document.getElementById("status");
    const consultationSection = document.getElementById("consultation-section");
    const startBtn = document.getElementById("start-btn");

    /********************************************************
     * RENDERING
     ********************************************************/
    function renderStep() {
      const step = steps[currentStepIndex];
      const total = steps.length;
      const stepNumber = currentStepIndex + 1;

      stepHeaderEl.innerHTML = `
        <div class="step-label">${step.section}</div>
        <h3 class="step-title">${step.title}</h3>
        <p class="step-subtitle">${step.subtitle || ""}</p>
      `;

      fieldsContainerEl.innerHTML = "";
      step.fields.forEach(field => {
        const wrapper = document.createElement("div");
        wrapper.className = "field-group";

        const fieldId = `field_${field.name}`;
        let labelHtml = `<label for="${fieldId}">${field.label}`;
        if (field.required) labelHtml += ` <span class="required-badge">*</span>`;
        labelHtml += `</label>`;

        const helperHtml = field.helper ? `<small>${field.helper}</small>` : "";
        const existingValue = answers[field.name] || "";
        let controlHtml = "";

        if (field.type === "textarea") {
          controlHtml = `<textarea id="${fieldId}" class="field-textarea" name="${field.name}" placeholder="${field.placeholder || ""}">${existingValue}</textarea>`;
        } else {
          controlHtml = `<input id="${fieldId}" class="field-input" type="${field.type}" name="${field.name}" placeholder="${field.placeholder || ""}" value="${existingValue}" />`;
        }

        wrapper.innerHTML = labelHtml + helperHtml + controlHtml;
        fieldsContainerEl.appendChild(wrapper);
      });

      const percent = (stepNumber / total) * 100;
      progressBarEl.style.width = percent.toFixed(1) + "%";
      progressTextEl.textContent = `Step ${stepNumber} of ${total}`;

      backBtn.disabled = currentStepIndex === 0;
      nextBtn.textContent = currentStepIndex === total - 1 ? "Submit ‚Üí" : "Next ‚Üí";

      statusEl.textContent = "";
      statusEl.className = "status-message status-neutral";
    }

    function collectCurrentStepValues() {
      const step = steps[currentStepIndex];
      let valid = true;
      let firstInvalidField = null;

      step.fields.forEach(field => {
        const fieldId = `field_${field.name}`;
        const el = document.getElementById(fieldId);
        if (!el) return;

        const value = el.value.trim();
        answers[field.name] = value;

        if (field.required && !value) {
          valid = false;
          if (!firstInvalidField) firstInvalidField = el;
        }

        if (field.required && field.type === "email" && value) {
          const emailOk = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value);
          if (!emailOk) {
            valid = false;
            if (!firstInvalidField) firstInvalidField = el;
          }
        }
      });

      if (!valid) {
        statusEl.textContent = "Please complete the required fields on this step.";
        statusEl.className = "status-message status-error";
        if (firstInvalidField) firstInvalidField.focus();
        return false;
      }
      return true;
    }

    /********************************************************
     * SUBMIT VIA HIDDEN FORM (NO fetch, no CORS)
     ********************************************************/
    function handleSubmit() {
      if (!collectCurrentStepValues()) return;

      const payload = {
        meta: {
          source: "FirmaPak Scenario Development Consultation",
          submittedAt: new Date().toISOString(),
          userAgent: navigator.userAgent
        },
        answers: { ...answers }
      };

      statusEl.textContent = "Submitting your responses...";
      statusEl.className = "status-message status-neutral";

      if (!WEBHOOK_URL) {
        statusEl.textContent = "No webhook URL configured. Please contact the Virtual Instinct team.";
        statusEl.className = "status-message status-error";
        return;
      }

      // create a hidden form that posts to Zapier via an invisible iframe
      const form = document.createElement("form");
      form.method = "POST";
      form.action = WEBHOOK_URL;
      form.target = "zapier_iframe";

      const input = document.createElement("input");
      input.type = "hidden";
      input.name = "payload";
      input.value = JSON.stringify(payload);

      form.appendChild(input);
      document.body.appendChild(form);

      form.submit(); // fire-and-forget

      statusEl.textContent = "Thanks! Your responses have been submitted to the Virtual Instinct team.";
      statusEl.className = "status-message status-success";
      nextBtn.disabled = true;
      backBtn.disabled = true;
    }

    /********************************************************
     * EVENTS
     ********************************************************/
    backBtn.addEventListener("click", () => {
      if (currentStepIndex === 0) return;
      if (!collectCurrentStepValues()) return;
      currentStepIndex -= 1;
      renderStep();
    });

    nextBtn.addEventListener("click", () => {
      const isLastStep = currentStepIndex === steps.length - 1;
      if (isLastStep) {
        handleSubmit();
      } else {
        if (!collectCurrentStepValues()) return;
        currentStepIndex += 1;
        renderStep();
      }
    });

    startBtn.addEventListener("click", () => {
      consultationSection.classList.remove("hidden");
      startBtn.disabled = true;
      startBtn.textContent = "Consultation Started";
      renderStep();
    });
  </script>
</body>
</html>




