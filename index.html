<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>FirmaPak | Scenario Development Consultation | Virtual Instinct</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --vi-navy:#050b18;
      --vi-navy-soft:#0c1b2a;
      --vi-slate:#101820;
      --vi-ink:#111827;
      --vi-teal:#18b7b4;
      --vi-blue:#2e7dd7;
      --vi-green:#41b66c;
      --vi-text:#e5ecf5;
      --vi-muted:#94a3b8;
      --vi-border:#1f2933;
      --card-radius:18px;
      --shadow-soft:0 18px 40px rgba(0,0,0,.55);
    }

    *{box-sizing:border-box;margin:0;padding:0;}

    body{
      font-family:"Inter",system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      background:radial-gradient(circle at top,#192a3d 0,#050b18 45%,#020617 100%);
      color:var(--vi-text);
      min-height:100vh;
      display:flex;
      justify-content:center;
    }

    .page-shell{
      width:100%;
      min-height:100vh;
      padding:24px 16px 40px;
      display:flex;
      justify-content:center;
    }

    .layout{
      width:100%;
      max-width:1120px;
      display:flex;
      flex-direction:column;
      gap:20px;
    }

    /* TOP BAR */
    .top-bar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
    }

    .logo-row{
      display:flex;
      align-items:center;
      gap:12px;
    }

    .firmapak-logo{
      height:32px;
      width:auto;
    }

    .vi-logo{
      height:26px;
      width:auto;
    }

    /* HERO */
    .hero{
      border-radius:24px;
      padding:24px 24px 22px;
      background:
        radial-gradient(circle at top left,rgba(59,130,246,.28),transparent 55%),
        radial-gradient(circle at bottom right,rgba(56,189,248,.18),transparent 60%),
        linear-gradient(145deg,#020617,#020617 35%,#020617);
      border:1px solid rgba(148,163,184,.35);
      box-shadow:var(--shadow-soft);
    }

    .hero-tagline{
      text-transform:uppercase;
      letter-spacing:.18em;
      font-size:11px;
      color:rgba(148,163,184,.9);
      margin-bottom:8px;
    }

    .hero-title{
      font-family:"Montserrat",system-ui;
      font-size:32px;
      line-height:1.2;
      margin-bottom:8px;
      letter-spacing:.02em;
    }

    .hero-title .highlight{color:#4f8cff;}

    .hero-subtitle{
      font-size:14px;
      color:var(--vi-muted);
      max-width:640px;
      margin-bottom:22px;
    }

    .hero-grid{
      display:grid;
      grid-template-columns:repeat(3,minmax(0,1fr));
      gap:14px;
      margin-bottom:20px;
    }

    @media(max-width:900px){
      .hero-grid{grid-template-columns:1fr;}
    }

    .hero-card{
      border-radius:18px;
      padding:14px 14px 16px;
      background:rgba(15,23,42,.96);
      border:1px solid rgba(51,65,85,.9);
    }

    .hero-card-title{
      font-size:13px;
      font-weight:600;
      margin-bottom:4px;
    }

    .hero-card-sub{
      font-size:12px;
      color:var(--vi-muted);
    }

    .hero-icon{
      width:24px;
      height:24px;
      border-radius:999px;
      margin-bottom:8px;
      display:flex;
      align-items:center;
      justify-content:center;
      background:rgba(37,99,235,.2);
      font-size:14px;
    }

    .hero-bottom-grid{
      display:grid;
      grid-template-columns:minmax(0,1.3fr) minmax(0,1.7fr);
      gap:16px;
      margin-top:8px;
      align-items:flex-start;
    }

    @media(max-width:900px){
      .hero-bottom-grid{grid-template-columns:1fr;}
    }

    .intake-card{
      border-radius:18px;
      padding:16px 16px 14px;
      background:radial-gradient(circle at top left,rgba(56,189,248,.18),transparent 55%),
                  radial-gradient(circle at bottom right,rgba(16,185,129,.2),transparent 60%),
                  linear-gradient(145deg,rgba(15,23,42,.96),rgba(15,23,42,.98));
      border:1px solid rgba(148,163,184,.32);
      font-size:12px;
    }

    .intake-title{
      font-family:"Montserrat",system-ui;
      font-size:15px;
      letter-spacing:.04em;
      text-transform:uppercase;
      margin-bottom:8px;
    }

    .intake-sub{
      font-size:12px;
      color:var(--vi-muted);
      margin-bottom:10px;
    }

    .scenario-chips{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin-bottom:10px;
    }

    .chip{
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:.12em;
      padding:5px 8px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.55);
      background:rgba(15,23,42,.9);
    }

    .intake-note{
      font-size:12px;
      color:var(--vi-muted);
      margin-bottom:10px;
    }

    .meta-box{
      margin-top:8px;
      padding:9px 11px;
      border-radius:14px;
      background:rgba(15,23,42,.9);
      border:1px solid rgba(148,163,184,.35);
      font-size:11px;
      color:var(--vi-muted);
    }

    .meta-row{
      display:flex;
      justify-content:space-between;
      gap:8px;
      margin-bottom:4px;
    }

    .meta-label{
      text-transform:uppercase;
      letter-spacing:.14em;
      font-size:9px;
      color:rgba(148,163,184,.9);
    }

    .meta-value{
      font-size:11px;
      color:#e5ecf5;
    }

    .meta-checklist{
      margin-top:4px;
      padding-left:16px;
    }
    .meta-checklist li{margin-bottom:3px;}

    .expect-card{
      border-radius:18px;
      padding:14px 16px 12px;
      background:rgba(15,23,42,.96);
      border:1px solid rgba(51,65,85,.9);
      font-size:12px;
    }

    .expect-title{font-size:12px;font-weight:600;margin-bottom:8px;}

    .expect-columns{
      display:grid;
      grid-template-columns:repeat(2,minmax(0,1fr));
      gap:10px;
    }

    @media(max-width:600px){
      .expect-columns{grid-template-columns:1fr;}
    }

    .expect-section-title{
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.16em;
      color:rgba(148,163,184,.9);
      margin-bottom:6px;
    }

    .expect-list{list-style:none;}

    .expect-list li{
      display:flex;
      gap:6px;
      margin-bottom:4px;
      font-size:12px;
    }

    .expect-list .bullet{font-size:12px;margin-top:1px;}

    .hero-cta-row{
      margin-top:16px;
      display:flex;
      align-items:center;
      gap:10px;
    }

    .btn{
      border-radius:999px;
      border:none;
      cursor:pointer;
      font-size:13px;
      font-weight:500;
      padding:9px 18px;
      display:inline-flex;
      align-items:center;
      gap:6px;
      white-space:nowrap;
      transition:background .15s ease,transform .08s ease,box-shadow .15s ease,opacity .15s ease;
      font-family:inherit;
    }

    .btn-primary{
      background:linear-gradient(135deg,var(--vi-teal),var(--vi-blue));
      color:#0b1220;
      box-shadow:0 10px 25px rgba(15,118,110,.6);
    }

    .btn-primary:hover{
      transform:translateY(-1px);
      box-shadow:0 14px 30px rgba(8,47,73,.8);
    }

    .hero-cta-hint{
      font-size:11px;
      color:var(--vi-muted);
    }

    .hero-cta-note{
      font-size:11px;
      color:var(--vi-muted);
      margin-top:6px;
    }

    /* WIZARD */
    .wizard-shell{
      margin-top:18px;
    }

    .card{
      position:relative;
      border-radius:var(--card-radius);
      background:
        radial-gradient(circle at top left,rgba(56,189,248,.16),transparent 54%),
        radial-gradient(circle at bottom right,rgba(45,212,191,.14),transparent 58%),
        linear-gradient(160deg,#020617,#020617 5%,#020617 40%,#020617 100%);
      border:1px solid rgba(51,65,85,.95);
      box-shadow:var(--shadow-soft);
      padding:18px 18px 16px;
      overflow:hidden;
    }

    .card::before{
      content:"";
      position:absolute;
      inset:0;
      background:radial-gradient(circle at top,rgba(59,130,246,.22),transparent 60%);
      opacity:.5;
      pointer-events:none;
      mix-blend-mode:soft-light;
    }

    .card-inner{position:relative;z-index:1;}

    .step-label{
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.16em;
      color:var(--vi-muted);
      margin-bottom:6px;
    }

    .step-title{
      font-family:"Montserrat",system-ui;
      font-size:18px;
      margin-bottom:4px;
    }

    .step-subtitle{
      font-size:13px;
      color:var(--vi-muted);
      margin-bottom:12px;
    }

    .fields-grid{
      display:flex;
      flex-direction:column;
      gap:12px;
      margin-bottom:14px;
    }

    .field-group label{
      display:block;
      font-size:12px;
      margin-bottom:4px;
      color:#e5ecf5;
      font-weight:500;
    }

    .field-group small{
      display:block;
      font-size:11px;
      color:var(--vi-muted);
      margin-bottom:4px;
    }

    .field-input,
    .field-textarea{
      width:100%;
      border-radius:11px;
      border:1px solid rgba(71,85,105,.95);
      padding:9px 10px;
      background:rgba(15,23,42,.96);
      color:#e5ecf5;
      font-size:13px;
      outline:none;
      transition:border-color .15s ease,box-shadow .15s ease,background .15s ease;
      resize:vertical;
      min-height:40px;
    }

    .field-textarea{
      min-height:90px;
      max-height:220px;
    }

    .field-input:focus,
    .field-textarea:focus{
      border-color:var(--vi-teal);
      box-shadow:0 0 0 1px rgba(34,211,238,.5);
      background:#020617;
    }

    .field-input::placeholder,
    .field-textarea::placeholder{
      color:rgba(148,163,184,.7);
    }

    .progress-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-top:4px;
    }

    .progress-meta{
      display:flex;
      flex-direction:column;
      gap:4px;
      min-width:0;
      flex:1;
    }

    .progress-bar-shell{
      position:relative;
      width:100%;
      height:6px;
      border-radius:999px;
      background:rgba(15,23,42,.95);
      overflow:hidden;
      border:1px solid rgba(30,64,175,.8);
    }

    .progress-bar-fill{
      position:absolute;
      inset:0;
      width:0;
      border-radius:999px;
      background:linear-gradient(90deg,var(--vi-teal),var(--vi-blue));
      transition:width .2s ease-out;
    }

    .progress-text{
      font-size:11px;
      color:var(--vi-muted);
    }

    .nav-buttons{
      display:flex;
      align-items:center;
      gap:8px;
    }

    .btn-secondary{
      background:rgba(15,23,42,.95);
      color:var(--vi-text);
      border:1px solid rgba(148,163,184,.75);
    }

    .btn-secondary:hover{background:rgba(15,23,42,1);}

    .btn:disabled{
      opacity:.45;
      cursor:default;
      transform:none;
      box-shadow:none;
    }

    .status-message{
      margin-top:10px;
      font-size:12px;
    }
    .status-success{color:#4ade80;}
    .status-error{color:#f97373;}
    .status-neutral{color:var(--vi-muted);}

    .required-badge{color:#f97373;margin-left:2px;}
    .hidden{display:none;}
  </style>
</head>
<body>
  <div class="page-shell">
    <div class="layout">

      <!-- TOP BAR -->
      <div class="top-bar">
        <div class="logo-row">
          <img
            class="firmapak-logo"
            src="https://23746819.fs1.hubspotusercontent-na1.net/hubfs/23746819/Firmapak%20-%20White%20Logo.webp"
            alt="FirmaPak Logo">
        </div>
        <img
          class="vi-logo"
          src="https://23746819.fs1.hubspotusercontent-na1.net/hubfs/23746819/Virtual%20Instinct-03.webp"
          alt="Virtual Instinct Logo">
      </div>

      <!-- HERO -->
      <section class="hero">
        <div class="hero-tagline">Consultation to Develop</div>
        <h1 class="hero-title">
          Virtual Practice <span class="highlight">Scenarios</span>
        </h1>
        <p class="hero-subtitle">
          Complete this consultation form to help us build customized sales training scenarios tailored to FirmaPak‚Äôs unique challenges and opportunities.
        </p>

        <div class="hero-grid">
          <div class="hero-card">
            <div class="hero-icon">üìã</div>
            <div class="hero-card-title">Qualifying &amp; Needs Analysis</div>
            <div class="hero-card-sub">
              Master early-stage conversations and uncover customer needs effectively.
            </div>
          </div>
          <div class="hero-card">
            <div class="hero-icon">üìë</div>
            <div class="hero-card-title">Proposal Review to Close</div>
            <div class="hero-card-sub">
              Navigate negotiations and close deals with confidence.
            </div>
          </div>
          <div class="hero-card">
            <div class="hero-icon">‚ö°</div>
            <div class="hero-card-title">The Medley (Full-Flow)</div>
            <div class="hero-card-sub">
              Practice complete sales cycles from start to finish.
            </div>
          </div>
        </div>

        <div class="hero-bottom-grid">
          <!-- Scenario Design Intake card (left) -->
          <div class="intake-card">
            <div class="intake-title">Scenario Design Intake</div>
            <p class="intake-sub">
              Use this intake to capture how your customers think, how deals are won or lost,
              and the exact moments your sales team needs to rehearse.
            </p>

            <div class="scenario-chips">
              <span class="chip">Qualifying &amp; Needs Analysis</span>
              <span class="chip">Proposal Review to Close</span>
              <span class="chip">Full-flow Medley</span>
            </div>

            <p class="intake-note">
              Your responses will be translated into live practice scenarios and Key Moments inside
              Virtual Instinct. We‚Äôll combine your lost deals, competitive dynamics, and internal
              sales patterns to build realistic simulations.
            </p>

            <div class="meta-box">
              <div class="meta-row">
                <span class="meta-label">Delivered To</span>
                <span class="meta-value">Virtual Instinct Scenario Design Team</span>
              </div>
              <div class="meta-row">
                <span class="meta-label">What Happens Next</span>
                <span class="meta-value">We write scripts, build role-play flows &amp; schedule sessions.</span>
              </div>
              <ul class="meta-checklist">
                <li>‚úî On submit, answers are sent to a secure webhook.</li>
                <li>‚úî Zapier handles email delivery &amp; HubSpot contact creation.</li>
              </ul>
            </div>
          </div>

          <!-- What to expect (right) -->
          <div class="expect-card">
            <div class="expect-title">What to Expect</div>
            <div class="expect-columns">
              <div>
                <div class="expect-section-title">This form covers</div>
                <ul class="expect-list">
                  <li><span class="bullet">‚úÖ</span><span>Customer profile &amp; ideal customer analysis</span></li>
                  <li><span class="bullet">‚úÖ</span><span>Customer personas &amp; buying dynamics</span></li>
                  <li><span class="bullet">‚úÖ</span><span>Qualifying &amp; needs analysis scenarios</span></li>
                  <li><span class="bullet">‚úÖ</span><span>Proposal review &amp; closing scenarios</span></li>
                </ul>
              </div>
              <div>
                <div class="expect-section-title">Time &amp; progress</div>
                <ul class="expect-list">
                  <li><span class="bullet">‚è±</span><span>Estimated time: 20‚Äì30 minutes</span></li>
                  <li><span class="bullet">üìÇ</span><span>16 steps to complete</span></li>
                  <li><span class="bullet">üìà</span><span>Progress indicator on each step</span></li>
                  <li><span class="bullet">‚úâÔ∏è</span><span>Responses emailed to the Virtual Instinct team</span></li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="hero-cta-row">
          <button id="start-btn" class="btn btn-primary">Start Consultation</button>
          <span class="hero-cta-hint">Questions will appear below once you start.</span>
        </div>
        <div class="hero-cta-note">
          You can complete this in one sitting or come back to it again with the team.
        </div>
      </section>

      <!-- WIZARD -->
      <main id="wizard-shell" class="wizard-shell hidden">
        <section class="card" aria-live="polite">
          <div class="card-inner">
            <div id="step-header"></div>
            <form id="wizard-form">
              <div id="fields-container" class="fields-grid"></div>
            </form>

            <div class="progress-row">
              <div class="progress-meta">
                <div class="progress-bar-shell" aria-hidden="true">
                  <div id="progress-bar" class="progress-bar-fill"></div>
                </div>
                <div id="progress-text" class="progress-text"></div>
              </div>
              <div class="nav-buttons">
                <button type="button" id="back-btn" class="btn btn-secondary">‚Üê Back</button>
                <button type="button" id="next-btn" class="btn btn-primary">Next ‚Üí</button>
              </div>
            </div>

            <div id="status" class="status-message status-neutral"></div>
          </div>
        </section>
      </main>
    </div>
  </div>

  <script>
    /*************** CONFIG: ZAPIER WEBHOOK ****************/
    const WEBHOOK_URL = "https://hooks.zapier.com/hooks/catch/25619352/ufuigki/";

    /******************** STEPS ****************************/
    const steps = [
      /* PRE-CONSULTATION */
      {
        id:"pre_team",
        section:"Pre-Consultation",
        title:"Who will be practicing?",
        subtitle:"List the salespeople who will participate so we can align scenarios with your team.",
        fields:[
          {
            name:"participants",
            label:"Names & emails of all participating salespeople",
            type:"textarea",
            required:false,
            helper:"You can paste a list or export from your CRM.",
            placeholder:"Example:\nJane Smith ‚Äì jane@firmapak.com\nAlex Johnson ‚Äì alex@firmapak.com"
          }
        ]
      },

      /* 1. CUSTOMER PROFILE */
      {
        id:"cp_icp",
        section:"1. Customer Profile",
        title:"Ideal Customer Profile (ICP)",
        subtitle:"Clarify who is a perfect-fit FirmaPak customer.",
        fields:[
          {
            name:"cp_icp_who",
            label:"Who is FirmaPak‚Äôs Ideal Customer Profile (ICP)?",
            type:"textarea",
            required:false,
            placeholder:"Describe your ideal customers in plain language."
          },
          {
            name:"cp_icp_fit",
            label:"What industries, company sizes, or product types best fit?",
            type:"textarea",
            required:false,
            placeholder:"List the industries, size ranges, and product types that are the best fit."
          }
        ]
      },
      {
        id:"cp_lost_deals",
        section:"1. Customer Profile",
        title:"Lost deals & proposal review",
        subtitle:"We‚Äôll turn these into realistic ‚Äòwhat actually happens‚Äô scenarios.",
        fields:[
          {
            name:"cp_lost_companies",
            label:"Describe four vertical-market companies where you recently lost, got ghosted, or lost to a competitor.",
            type:"textarea",
            required:false,
            helper:"Include the vertical, company, and deal type (lost, ghosted, lost to competitor).",
            placeholder:"1) Vertical / company / deal type\n2) ..."
          },
          {
            name:"cp_lost_proposals",
            label:"Can we get copies of the proposals used in these four deals?",
            type:"textarea",
            required:false,
            placeholder:"Where they are stored and how you can share them (drive links, email, etc.)."
          },
          {
            name:"cp_lost_main_contact",
            label:"Who was the main contact (title/function) for each of those deals?",
            type:"textarea",
            required:false,
            placeholder:"Include titles and functions, e.g., Brand Manager, Procurement, Plant Manager."
          },
          {
            name:"cp_lost_reasons",
            label:"Why do you believe those deals were lost?",
            type:"textarea",
            required:false,
            placeholder:"Pricing, responsiveness, technical fit, politics, timing, etc."
          },
          {
            name:"cp_lost_patterns",
            label:"What patterns or themes do you see in lost opportunities?",
            type:"textarea",
            required:false,
            placeholder:"Summarize the consistent reasons you see across deals."
          }
        ]
      },
      {
        id:"cp_competitive",
        section:"1. Customer Profile",
        title:"Competitive landscape",
        subtitle:"Map how buyers compare FirmaPak to alternatives.",
        fields:[
          {
            name:"cp_competitors",
            label:"Who are your biggest competitors?",
            type:"textarea",
            required:false,
            placeholder:"List by name and any important segments/regions."
          },
          {
            name:"cp_competitors_better",
            label:"What do buyers believe these competitors do better?",
            type:"textarea",
            required:false,
            placeholder:"Speed, scale, price, brand, perceived safety, etc."
          },
          {
            name:"cp_competitors_fail",
            label:"Where do those bigger competitors fail or fall short?",
            type:"textarea",
            required:false,
            placeholder:"Service, flexibility, innovation, quality, responsiveness, etc."
          }
        ]
      },
      {
        id:"cp_use_cases",
        section:"1. Customer Profile",
        title:"Use cases & vertical dynamics",
        subtitle:"Anchor practice in real blow-mold injection use cases.",
        fields:[
          {
            name:"cp_use_cases",
            label:"What are the primary use cases for blow-mold injection plastics?",
            type:"textarea",
            required:false,
            placeholder:"Describe the most common applications customers come to you for."
          },
          {
            name:"cp_vertical_unique",
            label:"What makes FirmaPak unique in certain verticals or markets?",
            type:"textarea",
            required:false,
            placeholder:"Capabilities, speed, engineering support, sustainability, etc."
          },
          {
            name:"cp_differentiators",
            label:"What differentiators resonate most with customers?",
            type:"textarea",
            required:false,
            placeholder:"What actually lands in conversations and moves deals forward?"
          },
          {
            name:"cp_notes",
            label:"Customer Profile ‚Äì notes",
            type:"textarea",
            required:false,
            placeholder:"Any notes you want us to keep in mind for this section."
          },
          {
            name:"cp_additional_questions",
            label:"Customer Profile ‚Äì additional questions for the team",
            type:"textarea",
            required:false,
            placeholder:"Questions you‚Äôd like to explore during live conversation."
          }
        ]
      },

      /* 2. CUSTOMER PERSONAS & BUYING DYNAMICS */
      {
        id:"persona_profiles",
        section:"2. Customer Personas & Buying Dynamics",
        title:"Typical buyer profiles",
        subtitle:"Define who is at the table during qualification and proposal review.",
        fields:[
          {
            name:"persona_common_buyers",
            label:"Who are the most common buyers at the qualification and proposal stages?",
            type:"textarea",
            required:false,
            placeholder:"Brand Managers, Procurement, Plant Managers, Supply Chain, Sustainability, etc."
          },
          {
            name:"persona_education_experience",
            label:"What is their education and experience level?",
            type:"textarea",
            required:false,
            placeholder:"Typical background, years in role, technical depth, etc."
          },
          {
            name:"persona_roles_functions",
            label:"What is their role or job function?",
            type:"textarea",
            required:false,
            placeholder:"Describe responsibilities and how they interact with suppliers."
          }
        ]
      },
      {
        id:"persona_dynamics",
        section:"2. Customer Personas & Buying Dynamics",
        title:"Role-based decision dynamics",
        subtitle:"Capture how each persona thinks, decides, and feels pressure.",
        fields:[
          {
            name:"persona_view_purchase",
            label:"How does each persona view the purchase differently?",
            type:"textarea",
            required:false,
            placeholder:"What does each persona care about most?"
          },
          {
            name:"persona_evaluate_suppliers",
            label:"How do they gather information and evaluate suppliers?",
            type:"textarea",
            required:false,
            placeholder:"RFPs, references, pilots, site visits, etc."
          },
          {
            name:"persona_internal_pressures",
            label:"What internal pressures do they experience?",
            type:"textarea",
            required:false,
            placeholder:"Revenue, risk mitigation, on-time delivery, sustainability requirements, etc."
          }
        ]
      },
      {
        id:"persona_risk",
        section:"2. Customer Personas & Buying Dynamics",
        title:"Risk perception & proof",
        subtitle:"Script objections and reassurance moments from real concerns.",
        fields:[
          {
            name:"persona_risk_worries",
            label:"What worries them most about choosing a smaller supplier?",
            type:"textarea",
            required:false,
            placeholder:"Capacity, reliability, financial stability, transition risk, etc."
          },
          {
            name:"persona_risk_assurance",
            label:"What assurances or proof points do they require?",
            type:"textarea",
            required:false,
            placeholder:"Certifications, case studies, SLAs, references, audits, etc."
          },
          {
            name:"persona_notes",
            label:"Personas & Buying Dynamics ‚Äì notes",
            type:"textarea",
            required:false,
            placeholder:"Anything else about emotional tone, style, or politics we should know."
          },
          {
            name:"persona_additional_questions",
            label:"Personas & Buying Dynamics ‚Äì additional questions",
            type:"textarea",
            required:false,
            placeholder:"Questions you want to bring into workshop conversation."
          }
        ]
      },

      /* 3. QUALIFYING & NEEDS ANALYSIS */
      {
        id:"qual_pipeline",
        section:"3. Qualifying & Needs Analysis",
        title:"Pipeline mechanics",
        subtitle:"Define what good qualification looks like in your world.",
        fields:[
          {
            name:"qual_lead_qualified",
            label:"What makes a lead qualified in your pipeline?",
            type:"textarea",
            required:false,
            placeholder:"Budget, authority, need, timeline, technical fit, etc."
          },
          {
            name:"qual_info_before_proposal",
            label:"What specific information must a rep uncover before drafting a proposal?",
            type:"textarea",
            required:false,
            placeholder:"Volume, specs, timing, decision process, success metrics, etc."
          },
          {
            name:"qual_minimum_info",
            label:"What is the minimum viable information needed to price or scope a project?",
            type:"textarea",
            required:false,
            placeholder:"What is the bare minimum needed to avoid bad proposals?"
          }
        ]
      },
      {
        id:"qual_bottlenecks",
        section:"3. Qualifying & Needs Analysis",
        title:"Pipeline bottlenecks & mistakes",
        subtitle:"Target the friction points reps feel in early conversations.",
        fields:[
          {
            name:"qual_where_stuck",
            label:"Where do reps get stuck most frequently in early stages?",
            type:"textarea",
            required:false,
            placeholder:"Discovery, technical scoping, navigating stakeholders, etc."
          },
          {
            name:"qual_stall_causes",
            label:"What causes leads to stall before moving to proposal review?",
            type:"textarea",
            required:false,
            placeholder:"Internal priorities, budget uncertainty, unclear next steps, etc."
          },
          {
            name:"qual_top_three_mistakes",
            label:"What are the top three mistakes reps make during qualification?",
            type:"textarea",
            required:false,
            placeholder:"Example: jumping to solution, not defining success, weak next steps, etc."
          }
        ]
      },
      {
        id:"qual_pain_motivation",
        section:"3. Qualifying & Needs Analysis",
        title:"Pain points, motivations & volatility",
        subtitle:"Capture why customers move, and what keeps them on the fence.",
        fields:[
          {
            name:"qual_switch_reasons",
            label:"Why do customers switch suppliers?",
            type:"textarea",
            required:false,
            placeholder:"Service failures, quality issues, cost volatility, etc."
          },
          {
            name:"qual_early_objections",
            label:"What common objections or brush-offs do reps face early?",
            type:"textarea",
            required:false,
            placeholder:"‚ÄúWe‚Äôre happy with our current supplier‚Äù, ‚ÄúSend me something‚Äù, etc."
          },
          {
            name:"qual_volatility_mentions",
            label:"How often do buyers mention supply chain volatility, resin variability, capacity, timeline, or changeovers?",
            type:"textarea",
            required:false,
            placeholder:"Include exact phrases or themes if you can."
          }
        ]
      },
      {
        id:"qual_competitive_decision",
        section:"3. Qualifying & Needs Analysis",
        title:"Competitive outlook & decision criteria",
        subtitle:"Tie early-stage conversations to how buyers ultimately choose.",
        fields:[
          {
            name:"qual_competitors_named",
            label:"Which competitors are mentioned by name in early calls?",
            type:"textarea",
            required:false,
            placeholder:"List who shows up most often."
          },
          {
            name:"qual_competitors_like",
            label:"What do buyers like about those competitors?",
            type:"textarea",
            required:false,
            placeholder:"Speed, scale, pricing, reputation, etc."
          },
          {
            name:"qual_competitors_short",
            label:"Where do those competitors fall short?",
            type:"textarea",
            required:false,
            placeholder:"Gaps you want your team to lean into during practice."
          },
          {
            name:"qual_decision_choose",
            label:"What is the #1 reason customers choose FirmaPak over competitors?",
            type:"textarea",
            required:false,
            placeholder:"The thing that truly tips decisions in your favor."
          },
          {
            name:"qual_decision_walk_away",
            label:"What is the #1 reason they walk away?",
            type:"textarea",
            required:false,
            placeholder:"The most common deal-killer."
          },
          {
            name:"qual_notes",
            label:"Qualifying & Needs Analysis ‚Äì notes",
            type:"textarea",
            required:false,
            placeholder:"Additional notes for this section."
          },
          {
            name:"qual_additional_questions",
            label:"Qualifying & Needs Analysis ‚Äì additional questions",
            type:"textarea",
            required:false,
            placeholder:"Questions you‚Äôd like to explore in live scenario design."
          }
        ]
      },

      /* 4. PROPOSAL REVIEW TO CLOSE */
      {
        id:"prc_proposal_process",
        section:"4. Proposal Review to Close",
        title:"Proposal process & format",
        subtitle:"Clarify how proposals are delivered and experienced by buyers.",
        fields:[
          {
            name:"prc_proposals_copies",
            label:"Can we get copies of four proposals in different verticals that did not close?",
            type:"textarea",
            required:false,
            placeholder:"Where they live and who can grant us access."
          },
          {
            name:"prc_delivery",
            label:"How are proposals typically delivered? (Email, video call, in person, etc.)",
            type:"textarea",
            required:false,
            placeholder:"Describe the most common paths."
          },
          {
            name:"prc_format",
            label:"What is the format or style of your proposals?",
            type:"textarea",
            required:false,
            placeholder:"Single option vs multiple options, volume incentives, visuals, etc."
          }
        ]
      },
      {
        id:"prc_negotiation",
        section:"4. Proposal Review to Close",
        title:"Negotiation dynamics & decision makers",
        subtitle:"Pinpoint where reps need more reps in late-stage conversations.",
        fields:[
          {
            name:"prc_negotiate_elements",
            label:"What elements of proposals do buyers negotiate most?",
            type:"textarea",
            required:false,
            placeholder:"Price, payment terms, volume, lead times, changeover costs, etc."
          },
          {
            name:"prc_scrutinize_details",
            label:"Where do buyers scrutinize details or pricing the most?",
            type:"textarea",
            required:false,
            placeholder:"Specific pages, clauses, or line items."
          },
          {
            name:"prc_late_objections",
            label:"What objections arise most frequently at this stage?",
            type:"textarea",
            required:false,
            placeholder:"Risk, implementation effort, switching cost, internal politics, etc."
          },
          {
            name:"prc_engagement_loss",
            label:"Where do reps tend to lose buyer engagement during the walkthrough?",
            type:"textarea",
            required:false,
            placeholder:"Moments where energy consistently drops."
          },
          {
            name:"prc_trial_close",
            label:"How do you pre-close or trial close or otherwise tie down deals?",
            type:"textarea",
            required:false,
            placeholder:"Specific questions or techniques you encourage."
          },
          {
            name:"prc_next_action",
            label:"What is the next action after receiving a signed deal or PO?",
            type:"textarea",
            required:false,
            placeholder:"Handoff, kickoff, implementation steps, etc."
          },
          {
            name:"prc_decision_makers",
            label:"Who makes the final decision? Is it the same contact from the beginning, or additional stakeholders?",
            type:"textarea",
            required:false,
            placeholder:"Detail the decision-making path."
          },
          {
            name:"prc_notes",
            label:"Proposal Review to Close ‚Äì notes",
            type:"textarea",
            required:false,
            placeholder:"Any other details for late-stage practice."
          },
          {
            name:"prc_additional_questions",
            label:"Proposal Review to Close ‚Äì additional questions",
            type:"textarea",
            required:false,
            placeholder:"Anything you want to dig into together."
          }
        ]
      },

      /* 5. VISIBILITY OF KEY MOMENTS */
      {
        id:"visibility",
        section:"5. Determine Visibility of Key Moments",
        title:"Key Moment visibility preferences",
        subtitle:"Clarify whether highlights are private, team-visible, or a mix.",
        fields:[
          {
            name:"vis_preference",
            label:"What is FirmaPak‚Äôs preference regarding Key Moment visibility?",
            type:"textarea",
            required:false,
            placeholder:"Private to salesperson, public to team, or a mix depending on content."
          },
          {
            name:"vis_confidential_topics",
            label:"Are there topics or practice moments that should remain confidential?",
            type:"textarea",
            required:false,
            placeholder:"Sensitive accounts, pricing structures, strategic topics, etc."
          },
          {
            name:"vis_leadership_access",
            label:"Will leadership want access to all clips or selected clips only?",
            type:"textarea",
            required:false,
            placeholder:"Who should see what, and under what conditions."
          },
          {
            name:"vis_notes",
            label:"Key Moment visibility ‚Äì notes",
            type:"textarea",
            required:false,
            placeholder:"Any internal guidelines or compliance constraints."
          }
        ]
      },

      /* 6. PRE-SCHEDULE VIRTUAL IMPROV PROGRAM */
      {
        id:"improv_schedule",
        section:"6. Pre-Schedule Virtual Improv Program",
        title:"Virtual improv scheduling",
        subtitle:"Align weekly improv sessions with your team‚Äôs rhythm.",
        fields:[
          {
            name:"improv_best_times",
            label:"What days/times work best for the team?",
            type:"textarea",
            required:false,
            placeholder:"Preferred time zones, days of the week, and ideal session length."
          },
          {
            name:"improv_notes",
            label:"Virtual Improv Program ‚Äì notes",
            type:"textarea",
            required:false,
            placeholder:"Busy seasons, blackout dates, or travel-heavy periods."
          }
        ]
      },

      /* 7. END-OF-PERIOD DEBRIEF */
      {
        id:"debrief",
        section:"7. End of Active Practice Period Debrief",
        title:"End-of-practice debrief",
        subtitle:"Proposed date: Monday, February 2. Align on outcomes, attendees, and recap format.",
        fields:[
          {
            name:"debrief_attendees",
            label:"Who should attend the debrief?",
            type:"textarea",
            required:false,
            placeholder:"Sales leaders, enablement, reps, operations, etc."
          },
          {
            name:"debrief_outcomes",
            label:"What outcomes matter most to measure success?",
            type:"textarea",
            required:false,
            placeholder:"Behavior change, pipeline movement, win rates, deal quality, etc."
          },
          {
            name:"debrief_recap",
            label:"Should a written or video recap be included?",
            type:"textarea",
            required:false,
            placeholder:"Preferred format and who it should be shared with."
          },
          {
            name:"debrief_notes",
            label:"End-of-period debrief ‚Äì notes",
            type:"textarea",
            required:false,
            placeholder:"Anything else you‚Äôd like us to know as we close out the period."
          }
        ]
      }
    ];

    /***************** STATE & DOM REFS ********************/
    let currentStepIndex = 0;
    const answers = {};

    const stepHeaderEl = document.getElementById("step-header");
    const fieldsContainerEl = document.getElementById("fields-container");
    const progressBarEl = document.getElementById("progress-bar");
    const progressTextEl = document.getElementById("progress-text");
    const backBtn = document.getElementById("back-btn");
    const nextBtn = document.getElementById("next-btn");
    const statusEl = document.getElementById("status");
    const startBtn = document.getElementById("start-btn");
    const wizardShell = document.getElementById("wizard-shell");

    /******************** RENDERING ************************/
    function renderStep(){
      const step = steps[currentStepIndex];
      const total = steps.length;
      const stepNumber = currentStepIndex + 1;

      stepHeaderEl.innerHTML = `
        <div class="step-label">${step.section}</div>
        <h3 class="step-title">${step.title}</h3>
        <p class="step-subtitle">${step.subtitle || ""}</p>
      `;

      fieldsContainerEl.innerHTML = "";
      step.fields.forEach(field=>{
        const wrapper = document.createElement("div");
        wrapper.className = "field-group";

        const fieldId = `field_${field.name}`;
        let labelHtml = `<label for="${fieldId}">${field.label}`;
        if(field.required) labelHtml += ` <span class="required-badge">*</span>`;
        labelHtml += `</label>`;

        const helperHtml = field.helper ? `<small>${field.helper}</small>` : "";
        const existingValue = answers[field.name] || "";
        let controlHtml = "";

        if(field.type === "textarea"){
          controlHtml = `
            <textarea
              id="${fieldId}"
              class="field-textarea"
              name="${field.name}"
              placeholder="${field.placeholder || ""}"
            >${existingValue}</textarea>
          `;
        }else{
          controlHtml = `
            <input
              id="${fieldId}"
              class="field-input"
              type="${field.type}"
              name="${field.name}"
              placeholder="${field.placeholder || ""}"
              value="${existingValue}"
            />
          `;
        }

        wrapper.innerHTML = labelHtml + helperHtml + controlHtml;
        fieldsContainerEl.appendChild(wrapper);
      });

      const percent = (stepNumber / total) * 100;
      progressBarEl.style.width = percent.toFixed(1) + "%";
      progressTextEl.textContent = `Step ${stepNumber} of ${total}`;

      backBtn.disabled = currentStepIndex === 0;
      nextBtn.textContent = currentStepIndex === total - 1 ? "Submit ‚Üí" : "Next ‚Üí";

      statusEl.textContent = "";
      statusEl.className = "status-message status-neutral";
    }

    function collectCurrentStepValues(){
      const step = steps[currentStepIndex];
      let valid = true;
      let firstInvalidField = null;

      step.fields.forEach(field=>{
        const fieldId = `field_${field.name}`;
        const el = document.getElementById(fieldId);
        if(!el) return;

        const value = el.value.trim();
        answers[field.name] = value;

        if(field.required && !value){
          valid = false;
          if(!firstInvalidField) firstInvalidField = el;
        }

        if(field.required && field.type === "email" && value){
          const emailOk = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value);
          if(!emailOk){
            valid = false;
            if(!firstInvalidField) firstInvalidField = el;
          }
        }
      });

      if(!valid){
        statusEl.textContent = "Please complete the required fields on this step.";
        statusEl.className = "status-message status-error";
        if(firstInvalidField) firstInvalidField.focus();
        return false;
      }

      return true;
    }

    /******************** SUBMIT ***************************/
    function handleSubmit(){
      if(!collectCurrentStepValues()) return;

      const payloadObj = {
        meta:{
          source:"FirmaPak Scenario Development Consultation",
          submittedAt:new Date().toISOString(),
          userAgent:navigator.userAgent
        },
        answers:{...answers}
      };

      const payload = JSON.stringify(payloadObj);

      statusEl.textContent = "Submitting your responses...";
      statusEl.className = "status-message status-neutral";

      try{
        const form = document.createElement("form");
        form.method = "POST";
        form.action = WEBHOOK_URL;

        const hidden = document.createElement("input");
        hidden.type = "hidden";
        hidden.name = "payload";
        hidden.value = payload;
        form.appendChild(hidden);

        document.body.appendChild(form);
        form.submit();

        statusEl.textContent = "Thanks! Your responses are being sent to the Virtual Instinct team.";
        statusEl.className = "status-message status-success";
        nextBtn.disabled = true;
        backBtn.disabled = true;
      }catch(err){
        console.error("Form POST failed:", err);
        statusEl.textContent = "We couldn‚Äôt submit the form. Please refresh and try again, or email your Virtual Instinct contact.";
        statusEl.className = "status-message status-error";
      }
    }

    /********************* EVENTS **************************/
    backBtn.addEventListener("click", ()=>{
      if(currentStepIndex === 0) return;
      if(!collectCurrentStepValues()) return;
      currentStepIndex -= 1;
      renderStep();
    });

    nextBtn.addEventListener("click", ()=>{
      const isLastStep = currentStepIndex === steps.length - 1;
      if(isLastStep){
        handleSubmit();
      }else{
        if(!collectCurrentStepValues()) return;
        currentStepIndex += 1;
        renderStep();
      }
    });

    startBtn.addEventListener("click", ()=>{
      wizardShell.classList.remove("hidden");
      startBtn.disabled = true;
      startBtn.textContent = "Consultation Started";
      renderStep();
      window.scrollTo({top:wizardShell.offsetTop - 40,behavior:"smooth"});
    });
  </script>
</body>
</html>


